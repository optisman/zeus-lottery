"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[924],{47924:function(e,t,n){n.d(t,{z:function(){return X}});var i=n(50029),o=n(87794),r=n.n(o),a=n(67294),s=n(17042),c=n(25617),d=n(53918),l=n(69795),p=n(30381),m=n.n(p),x=n(77837),f=n(79613),u=n(79839),h=n(39584),g=n(83253),y=n.n(g),v=n(85893),w={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)",padding:"0",width:"100%",maxWidth:"500px",borderRadius:"10px"}},b={0:"Not Started",1:"Active",2:"Closed"},j=function(e){var t=e.modalIsOpen,n=e.closeModal,o=(0,a.useState)(20),c=o[0],d=o[1],p=(0,a.useState)(!1),m=p[0],u=p[1],g=(0,f.y)(),j=g.currentLotteryId,q=g.currentLottery,S=g.userData,A=g.owner,W=g.maxTicketQuantityPerJoin,z=(0,l.Ge)().account,B=(0,x.Q)(),M=B.onApprove,J=B.onEnterLottery,E=q&&q.status?q.status:0,Y=S&&S.allowance&&(0,h._q)(S.allowance)>0,D=z&&z.toLowerCase()===(null===A||void 0===A?void 0:A.toLowerCase()),R=function(){var e=(0,i.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z){e.next=2;break}return e.abrupt("return");case 2:if(Y){e.next=15;break}return u(!0),e.prev=4,e.next=7,M();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log("Approve error:",e.t0);case 12:u(!1),e.next=27;break;case 15:return u(!0),e.prev=16,e.next=19,J(t,c);case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(16),console.log("Joining lottery error:",e.t1);case 24:u(!1),d(0),n();case 27:case"end":return e.stop()}}),e,null,[[4,9],[16,21]])})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsx)(C,{children:(0,v.jsx)(y(),{isOpen:t,onRequestClose:n,style:w,contentLabel:"Example Modal",children:(0,v.jsxs)(_,{children:[(0,v.jsx)(L,{children:(0,v.jsxs)(k,{children:[(0,v.jsx)(P,{children:"Ticket Quantity:"}),(0,v.jsx)(N,{children:(0,v.jsx)(s.II,{value:c,onChange:function(e){var t=e.target.value;d(t)}})}),(0,v.jsx)(I,{children:"Users can buy up to ".concat(W," tickets per wallet.")})]})}),(0,v.jsx)(Z,{children:!D&&z&&"Active"===b[E]&&(0,v.jsx)(T,{isApproveBtn:Y,disabled:m||!z||"Active"!==b[E],onClick:function(){return R(j)},children:m?"Pending...":Y?"Join Lottery":"Approve"})})]})})})},C=d.ZP.div.withConfig({displayName:"JoinModal__StyledModalContainer",componentId:"sc-s958y1-0"})([""]),_=d.ZP.div.withConfig({displayName:"JoinModal__LotteryJoinContent",componentId:"sc-s958y1-1"})(["padding:0 36px;max-width:500px;margin:0 auto;background:#1f224a;padding:20px;width:100%;"]),L=d.ZP.div.withConfig({displayName:"JoinModal__InputContainer",componentId:"sc-s958y1-2"})([""]),k=d.ZP.div.withConfig({displayName:"JoinModal__StyledInputWrapper",componentId:"sc-s958y1-3"})(["margin-bottom:20px;"]),P=d.ZP.div.withConfig({displayName:"JoinModal__StyledInputLabel",componentId:"sc-s958y1-4"})(["font-size:16px;color:#fff;margin-bottom:8px;font-family:'Work Sans',sans-serif;"]),I=d.ZP.div.withConfig({displayName:"JoinModal__StyledInputInfo",componentId:"sc-s958y1-5"})(["margin-top:10px;font-size:14px;color:#ff0000;margin-bottom:8px;font-family:'Work Sans',sans-serif;"]),N=d.ZP.div.withConfig({displayName:"JoinModal__StyledInput",componentId:"sc-s958y1-6"})(["input{color:white;}"]),Z=d.ZP.div.withConfig({displayName:"JoinModal__ActionContainer",componentId:"sc-s958y1-7"})(["display:flex;"]),T=(0,d.ZP)(s.zx).withConfig({displayName:"JoinModal__StyledButton",componentId:"sc-s958y1-8"})(["background:",";color:",";cursor:pointer;"],(function(e){return e.isApproveBtn?"linear-gradient(107.61deg, #3282f3 -4.47%, #203f99 103.79%)":"#E3E9F8"}),(function(e){return e.isApproveBtn?"#fff":"#214099"})),q={0:"Not Started",1:"Active",2:"Closed"},S=function(e){var t="th Place";return 1===e&&(t="st Place"),2===e&&(t="nd Place"),3===e&&(t="rd Place"),"".concat(e).concat(t)},A=d.ZP.div.withConfig({displayName:"Lottery__LotteryContainer",componentId:"sc-1paq0a4-0"})(["padding:2rem 0;background:#1f224a;min-height:calc(100vh - 90px);"]),W=d.ZP.div.withConfig({displayName:"Lottery__LotteryContent",componentId:"sc-1paq0a4-1"})(["padding:0 36px;max-width:1200px;margin:0 auto;"]),z=d.ZP.div.withConfig({displayName:"Lottery__LotteryTitle",componentId:"sc-1paq0a4-2"})(["font-size:32px;font-family:'Work Sans',sans-serif;font-weight:600;color:#fff;margin-bottom:20px;text-align:center;"]),B=d.ZP.div.withConfig({displayName:"Lottery__LotteryInfoCards",componentId:"sc-1paq0a4-3"})(["display:grid;align-items:center;grid-template-columns:repeat(3,1fr);column-gap:30px;margin-bottom:30px;@media only screen and (min-width:768px) and (max-width:1024px){grid-template-columns:repeat(2,1fr);}@media only screen and (min-width:560px) and (max-width:768px){grid-template-columns:1fr;}@media only screen and (max-width:560px){grid-template-columns:1fr;}"]),M=d.ZP.div.withConfig({displayName:"Lottery__LotteryInfoCard",componentId:"sc-1paq0a4-4"})(["background-color:#0c0f38;padding:16px;border-radius:8px;position:relative;overflow:hidden;margin-bottom:16px;"]),J=d.ZP.img.withConfig({displayName:"Lottery__CardBgImg",componentId:"sc-1paq0a4-5"})(["position:absolute;width:315px;height:315px;right:-155px;top:-155px;opacity:0.4;"]),E=d.ZP.div.withConfig({displayName:"Lottery__CardTop",componentId:"sc-1paq0a4-6"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;"]),Y=d.ZP.div.withConfig({displayName:"Lottery__CardTitle",componentId:"sc-1paq0a4-7"})(["font-family:'Work Sans',sans-serif;color:#8eb7f5;font-weight:600;font-size:14px;"]),D=d.ZP.div.withConfig({displayName:"Lottery__CardIcon",componentId:"sc-1paq0a4-8"})(["background:#8eb7f5;padding:7px;border-radius:8px;display:flex;align-items:center;margin-right:12px;"]),R=d.ZP.div.withConfig({displayName:"Lottery__CardBottom",componentId:"sc-1paq0a4-9"})(["font-size:20px;color:#fff;font-weight:600;font-family:'Work Sans',sans-serif;"]),Q=(d.ZP.div.withConfig({displayName:"Lottery__LotteryParticipantTableContainer",componentId:"sc-1paq0a4-10"})([""]),d.ZP.div.withConfig({displayName:"Lottery__LotteryParticipantTableTop",componentId:"sc-1paq0a4-11"})(["margin-top:10px;display:flex;justify-content:space-between;margin-bottom:10px;"]),d.ZP.div.withConfig({displayName:"Lottery__LotteryParticipantTableTitle",componentId:"sc-1paq0a4-12"})(["font-size:24px;color:#fff;font-weight:600;margin-top:10px;font-family:'Work Sans',sans-serif;"]),d.ZP.div.withConfig({displayName:"Lottery__LotteryParticipantTableAction",componentId:"sc-1paq0a4-13"})(["display:flex;"]),(0,d.ZP)(s.zx).withConfig({displayName:"Lottery__StyledButton",componentId:"sc-1paq0a4-14"})(["background:",";color:",";margin-left:20px;cursor:pointer;height:40px;"],(function(e){return e.isApproveBtn?"linear-gradient(107.61deg, #3282f3 -4.47%, #203f99 103.79%)":"#E3E9F8"}),(function(e){return e.isApproveBtn?"#fff":"#214099"}))),F=d.ZP.div.withConfig({displayName:"Lottery__LotteryStatus",componentId:"sc-1paq0a4-15"})(["font-size:24px;color:red;font-weight:600;margin-top:10px;font-family:'Work Sans',sans-serif;margin-left:20px;"]),H=(d.ZP.div.withConfig({displayName:"Lottery__LotteryParticipantTableWrapper",componentId:"sc-1paq0a4-16"})(["overflow-y:auto;margin:5px 0 !important;max-height:500px;"]),d.ZP.table.withConfig({displayName:"Lottery__LotteryParticipantTable",componentId:"sc-1paq0a4-17"})(["width:100%;border:1px solid #0c0f38;border-radius:8px;color:#bebebe;text-align:start;th,tr,td{padding:0.75rem 0.5rem;text-align:start;}thead{vertical-align:bottom;background-color:#2e3c67;}tbody tr td{border-bottom:1px solid #8eb7f5;}"]),d.ZP.div.withConfig({displayName:"Lottery__ParticipantStatus",componentId:"sc-1paq0a4-18"})(["padding:5px 12px;border-radius:20px;color:#fff;width:max-content;font-weight:600;font-size:12px;background-color:",";"],(function(e){return e.isWinner?"#219A8B":"#989A21"})),d.ZP.div.withConfig({displayName:"Lottery__LotteryWinnerTableContainer",componentId:"sc-1paq0a4-19"})([""])),O=d.ZP.div.withConfig({displayName:"Lottery__LotteryWinnerTableTop",componentId:"sc-1paq0a4-20"})(["margin-top:10px;display:flex;justify-content:space-between;margin-bottom:10px;"]),G=d.ZP.div.withConfig({displayName:"Lottery__LotteryWinnerTableTitle",componentId:"sc-1paq0a4-21"})(["font-size:24px;color:#fff;font-weight:600;margin-top:10px;font-family:'Work Sans',sans-serif;"]),U=d.ZP.div.withConfig({displayName:"Lottery__LotteryTableAction",componentId:"sc-1paq0a4-22"})(["display:flex;"]),K=d.ZP.div.withConfig({displayName:"Lottery__LotteryWinnerTableWrapper",componentId:"sc-1paq0a4-23"})(["overflow-y:auto;margin:5px 0 !important;max-height:550px;"]),V=d.ZP.table.withConfig({displayName:"Lottery__LotteryWinnerTable",componentId:"sc-1paq0a4-24"})(["width:100%;border:1px solid #0c0f38;border-radius:8px;color:#bebebe;text-align:start;th,tr,td{padding:0.75rem 0.5rem;text-align:start;}thead{vertical-align:bottom;background-color:#2e3c67;}tbody tr td{border-bottom:1px solid #8eb7f5;}"]),X=(d.ZP.div.withConfig({displayName:"Lottery__WinnerStatus",componentId:"sc-1paq0a4-25"})(["padding:5px 12px;border-radius:20px;color:#fff;width:max-content;font-weight:600;font-size:12px;background-color:",";"],(function(e){return e.isWinner?"#219A8B":"#989A21"})),function(){var e=(0,c.I0)(),t=(0,a.useState)(!1),n=t[0],o=t[1],d=(0,a.useState)(!1),p=d[0],g=d[1],y=(0,a.useState)(!1),w=y[0],b=y[1],C=(0,l.Ge)().account,_=(0,x.Q)(),L=_.onEndLottery,k=_.onClaimLotteryReward,P=(0,f.y)(),I=P.currentLotteryId,N=P.currentLottery,Z=P.userData,T=P.owner,X=(P.maxTicketQuantityPerJoin,P.numberOfWinners),$=N&&N.players?N.players:[],ee=N&&N.winners?N.winners:[],te=N&&N.status?N.status:0,ne=N&&N.ticketPrice?N.ticketPrice:0,ie=N&&N.maxTicketCnt?N.maxTicketCnt:0,oe=!(!N||!N.isRewardClaimed)&&N.isRewardClaimed,re=Z&&Z.allowance&&(0,h._q)(Z.allowance)>0,ae=Number(Z&&Z.tokenBalance?Z.tokenBalance:0).toFixed(2),se=(ne*$.length*.6).toFixed(2),ce=ne*ie*.6,de=$.filter((function(e){return e.account.toLowerCase()===(null===C||void 0===C?void 0:C.toLowerCase())})).length,le=C&&C.toLowerCase()===(null===T||void 0===T?void 0:T.toLowerCase()),pe=($.map((function(e){return{address:e.account,joinedTime:m().utc(1e3*Number(e.joinedTimestamp)).local().format("YYYY-MM-DD HH:mm:ss"),isWinner:ee.includes(e.ticketId)?1:0}})),ee.map((function(e){var t=$.find((function(t){return t.ticketId===e}));return{ticketId:e,address:null===t||void 0===t?void 0:t.account,joinedTime:m().utc(1e3*Number(null===t||void 0===t?void 0:t.joinedTimestamp)).local().format("YYYY-MM-DD HH:mm:ss")}})));(0,a.useEffect)((function(){C&&e((0,u.i7)(C))}),[C,e]);var me=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n&&C&&"Active"===q[te]){e.next=2;break}return e.abrupt("return");case 2:return o(!0),e.prev=3,e.next=6,L(I);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Ending lottery error:",e.t0);case 11:o(!1);case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oe&&!p&&C&&"Closed"===q[te]){e.next=2;break}return e.abrupt("return");case 2:return g(!0),e.prev=3,e.next=6,k(I);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Ending lottery error:",e.t0);case 11:g(!1);case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){b(!w)};return(0,v.jsx)(A,{children:(0,v.jsxs)(W,{children:[(0,v.jsx)(z,{children:"ZEUS Lottery"}),(0,v.jsxs)(B,{children:[(0,v.jsxs)(M,{children:[(0,v.jsx)(J,{src:"images/gradient-green.png"}),(0,v.jsxs)(E,{children:[(0,v.jsx)(Y,{children:"Wallet Balance"}),(0,v.jsx)(D,{children:(0,v.jsx)("i",{className:"uil uil-wallet icon"})})]}),(0,v.jsx)(R,{children:"".concat((null===ae||void 0===ae?void 0:ae.toLocaleString())||0," zeus")})]}),(0,v.jsxs)(M,{children:[(0,v.jsx)(J,{src:"images/gradient-green.png"}),(0,v.jsxs)(E,{children:[(0,v.jsx)(Y,{children:"Lottery ID"}),(0,v.jsx)(D,{children:(0,v.jsx)("i",{className:"uil uil-wallet icon"})})]}),(0,v.jsx)(R,{children:I})]}),(0,v.jsxs)(M,{children:[(0,v.jsx)(J,{src:"images/gradient-green.png"}),(0,v.jsxs)(E,{children:[(0,v.jsx)(Y,{children:"Ticket Price"}),(0,v.jsx)(D,{children:(0,v.jsx)("i",{className:"uil uil-wallet icon"})})]}),(0,v.jsx)(R,{children:"".concat((null===ne||void 0===ne?void 0:ne.toLocaleString())||0," zeus")})]}),(0,v.jsxs)(M,{children:[(0,v.jsx)(J,{src:"images/gradient-green.png"}),(0,v.jsxs)(E,{children:[(0,v.jsx)(Y,{children:"Tickets bought from Balance"}),(0,v.jsx)(D,{children:(0,v.jsx)("i",{className:"uil uil-list-ul icon"})})]}),(0,v.jsx)(R,{children:"".concat(de," tickets")})]}),(0,v.jsxs)(M,{children:[(0,v.jsx)(J,{src:"images/gradient-blue.png"}),(0,v.jsxs)(E,{children:[(0,v.jsx)(Y,{children:"Tickets Sold"}),(0,v.jsx)(D,{children:(0,v.jsx)("i",{className:"uil uil-users-alt icon"})})]}),(0,v.jsx)(R,{children:"".concat($.length," / ").concat(ie," tickets")})]}),(0,v.jsxs)(M,{children:[(0,v.jsx)(J,{src:"images/gradient-green.png"}),(0,v.jsxs)(E,{children:[(0,v.jsx)(Y,{children:"Lottery Prize Pool"}),(0,v.jsx)(D,{children:(0,v.jsx)("i",{className:"uil uil-trophy icon"})})]}),(0,v.jsx)(R,{children:"".concat(se," / ").concat(ce," zeus")})]})]}),(0,v.jsxs)(H,{children:[(0,v.jsxs)(O,{children:[(0,v.jsx)(G,{children:"Winners [ ".concat(null===N||void 0===N?void 0:N.winners.length," / ").concat(X," ]")}),(0,v.jsxs)(U,{children:[!le&&C&&"Active"===q[te]&&(0,v.jsx)(Q,{disabled:!C||"Active"!==q[te],onClick:fe,children:"Join"}),le&&"Active"===q[te]&&(0,v.jsx)(Q,{isApproveBtn:re,disabled:n||!C||"Active"!==q[te],onClick:me,children:n?"Pending...":"End Lottery"}),le&&"Closed"===q[te]&&(0,v.jsx)(Q,{disabled:oe||p||!C||"Closed"!==q[te],onClick:xe,children:n?"Pending...":"Claim reward"}),void 0!==I&&I>0&&"Active"!==q[te]&&(0,v.jsx)(F,{children:"Closed"})]})]}),(0,v.jsx)(K,{children:(0,v.jsxs)(V,{children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Rankings"}),(0,v.jsx)("th",{children:"Winner"}),(0,v.jsx)("th",{children:"Percentage"})]})}),(0,v.jsx)("tbody",{children:[1,2,3,4,5,6,7,8,9,10].map((function(e,t){var n,i=pe[t];return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:S(t+1)}),(0,v.jsx)("td",{children:i&&i.address?i.address:""}),(0,v.jsx)("td",{children:(n=t+1,1===n?"50.00%":2===n?"17.00%":3===n?"11.00%":4===n?"6.00%":5===n?"5.00%":6===n?"4.00%":7===n?"3.00%":8===n||9===n?"2.00%":10===n?"1 Zeus Node":void 0)})]},t)}))})]})})]}),(0,v.jsx)(s.xu,{p:3,children:(0,v.jsx)(s.xu,{sx:{marginTop:0,marginBottom:90}})}),w&&(0,v.jsx)(j,{modalIsOpen:w,closeModal:fe})]})})})}}]);